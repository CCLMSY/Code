# 插件本地调试方案

- 添加 `dev` 依赖项

```sh
pdm add --dev nonebot2[fastapi] nonebot-adapter-onebot
```

- 创建 `bot.py`

```python
# bot.py
import nonebot
from nonebot.adapters.onebot.v11 import Adapter as OB11Adapter
from nonebot.adapters.qq import Adapter as QQAdapter

nonebot.init()
driver = nonebot.get_driver()
driver.register_adapter(OB11Adapter)
driver.register_adapter(QQAdapter)
nonebot.load_plugin("your_plugin")

if __name__ == "__main__":
    nonebot.run()
```

- 创建 `.env` 和 `.env.dev` , 根据 nb 官方文档和插件需求填写配置项
- 在 `.gitignore` 中添加 `bot.py`, `.env.*`
- 配置 VSC 调试启动文件为 `bot.py`

```json
// .vscode/launch.json
{
  "version": "0.2.0",
  "configurations": [
    {
      "name": "Python 调试: Nonebot2",
      "type": "debugpy",
      "request": "launch",
      "program": "bot.py",
      "console": "integratedTerminal",
      "justMyCode": false
    }
  ]
}
```

- 下载并配置 [`matcha`](https://github.com/A-kirami/matcha)
- 启动 VSC 调试，启动 `matcha` 并连接
